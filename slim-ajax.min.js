"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function isObject(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&!Array.isArray(e)}function checkArgs(e,o){var t;if("string"!=typeof e)throw(t=new TypeError("url must be a string!")).name="Slim-AJAX "+t.name,t;if("boolean"!=typeof o)throw(t=new TypeError("async must be a boolean value!")).name="Slim-AJAX "+t.name,t}function errorConstructor(e,o){if("type"===e)var t=new TypeError(o);else if("syntax"===e)t=new TypeError(o);throw t.name="Slim-AJAX "+t.name,t}var slimAjax=function(){var e={},o={};function t(t,n,r,s,a){var i=this,l=new XMLHttpRequest,p={},u={contentType:e.contentType||"",overrideMimeTypeWith:e.overrideMimeType||null,timeout:e.timeout||0,noCache:e.noCache||!0,cors:e.cors||!1,onSuccess:null,onFailure:null,onLoadStart:e.onLoadStart||null,onProgress:e.onProgress||null,onAbort:e.onAbort||function(e){console.log("Request aborted!")},onError:e.onError||function(e){console.log("Connection failed!")},onLoad:e.onLoad||null,onTimeout:e.onTimeout||null,onLoadEnd:e.onLoadEnd||null};r?u.responseType=e.responseType||"":void 0!==e.responseType&&console.error("For synchronous AJAX requests, 'responseType' cannot be set. Slim-AJAX ignores setting that by user!");var c={onLoadStart:null,onProgress:null,onAbort:null,onError:null,onLoad:null,onTimeout:null,onLoadEnd:null};"string"==typeof s&&""!==s&&"string"==typeof a&&""!==a&&(p.Authorization="Basic "+btoa(s+":"+a)),this.setHeaders=function(e){if(isObject(e)){for(var o in e)p[o]=e[o];return i}errorConstructor("type","parameter must be an object!")},this.setPropsHandlers=function(e){if(isObject(e)){var o=Object.keys(u);for(var t in e)o.includes(t)?u[t]=e[t]:console.warn("Some options are not supported!")}else errorConstructor("type","parameter must be an object!");return i},this.setUploadHandlers=function(e){if(isObject(e)){var o=Object.keys(c);for(var t in e)o.includes(t)?c[t]=e[t]:console.warn("Some events are not supported!");return i}errorConstructor("type","parameter must be an object!")},this.send=function(e){l.open(t,n,r);var s=function(e){switch(e){case"contentType":p["Content-Type"]=i.mimeTypes[u.contentType];break;case"responseType":"string"==typeof u.responseType&&(l.responseType=u.responseType);break;case"overrideMimeType":l.overrideMimeType(u.overrideMimeType);break;case"timeout":l.timeout=u.timeout;break;case"cors":l.withCredentials=u.cors;break;case"onLoadStart":l.onloadstart=u[e];break;case"onProgress":l.onprogress=u[e];break;case"onLoad":l.onload=function(t){var n=u.responseType.toLowerCase(),r={response:l.response,getResponseHeader:l.getResponseHeader,getAllResponseHeaders:l.getAllResponseHeaders};""!==n&&"text"!==u.responseType.toLowerCase()||(r.responseText=l.responseText),"document"===n&&(r.responseXML=l.responseXML),"function"==typeof u[e]&&u[e].call(null,t,r,o)};break;case"onAbort":l.onabort=u[e];break;case"onError":l.onerror=u[e];break;case"onTimeout":l.ontimeout=u[e];break;case"onLoadEnd":l.onloadend=u[e]}};for(var a in u)s(a);for(var a in p)l.setRequestHeader(a,p[a]);l.onreadystatechange=function(){if(4===l.readyState)if(200===l.status){var e=u.responseType.toLowerCase(),t={response:l.response,getResponseHeader:l.getResponseHeader,getAllResponseHeaders:l.getAllResponseHeaders};""!==e&&"text"!==e||(t.responseText=l.responseText),"document"===e&&(t.responseXML=l.responseXML),Array.isArray(u.onSuccess)&&u.onSuccess.length>0?u.onSuccess.forEach((function(e){"function"==typeof e&&e.call(null,t,o)})):"function"==typeof u.onSuccess&&u.onSuccess.call(null,t,o)}else{var n={status:l.status,getResponseHeader:l.getResponseHeader,getAllResponseHeaders:l.getAllResponseHeaders};"function"==typeof u.onFailure&&u.onFailure.call(null,n)}else{var r={readyState:l.readyState,getResponseHeader:l.getResponseHeader,getAllResponseHeaders:l.getAllResponseHeaders};"function"==typeof u.onFailure&&u.onFailure.call(null,r)}};var d=function(e){"onLoad"!==e?l.upload[e.toLowerCase()]=c[e]:"onLoad"===e&&"function"==typeof c[e]&&(l.upload.onload=function(t){var n=u.responseType.toLowerCase(),r={response:l.response,getResponseHeader:l.getResponseHeader,getAllResponseHeaders:l.getAllResponseHeaders};""!==n&&"text"!==n||(r.responseText=l.responseText),"document"===n&&(r.responseXML=l.responseXML),c[e].call(null,t,r,o)})};for(var f in c)d(f);return"GET"===t?l.send(""):l.send(e),l}}return t.prototype.mimeTypes={text:"text/plain",html:"text/html",css:"text/css",js:"application/javascript",json:"application/json",form:"application/x-www-form-urlencoded",xml:"text/xml",pdf:"application/pdf",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",wma:"audio/x-ms-wma",mp4:"video/mp4",ai:"application/postscript",zip:"application/zip"},{globals:{},request:function(n,r){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments[3],i=arguments[4];o=this.globals,e=isObject(this.request.defaults)?this.request.defaults:{};var l="";if(arguments.length<2)errorConstructor("syntax","An http method and a url are required!");else{if("string"!=typeof n)errorConstructor("type","http method must be a string!");else{var p=n.toUpperCase();["GET","POST","HEAD","PUT","DELETE"].includes(p)?l=p:errorConstructor("syntax","http method is not supported")}checkArgs(r,s)}return new t(l,r,s,a,i)},get:function(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments[2],a=arguments[3];if(o=this.globals,e={contentType:"html",cors:!0,noCache:!0,timeout:0},r&&(e.responseType="text"),isObject(this.get.defaults))for(var i in this.get.defaults)e[i]=this.get.defaults[i];return 0===arguments.length?errorConstructor("syntax","get() must be called with a url!"):checkArgs(n,r),new t("GET",n,r,s,a)},post:function(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments[2],a=arguments[3];if(o=this.globals,e={contentType:"json",cors:!0,timeout:0},r&&(e.responseType="json"),isObject(this.post.defaults))for(var i in this.post.defaults)e[i]=this.post.defaults[i];return 0===arguments.length?errorConstructor("syntax","post() must be called with a url!"):checkArgs(n,r),new t("POST",n,r,s,a)}}}();